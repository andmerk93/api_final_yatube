# Yatube API

Реализация REST API для учебного проекта Yatube на Яндекс.Практикуме. Сделан  на Django Rest Framework в 2023.

## Возможности:
- Получение, создание, обновление и удаление публикаций
- Получение, создание, обновление и удаление комментариев к публикациям
- Просмотр списков сообществ
- Добавление и просмотр своих подписок
- Каждый пользователь может редактировать только свои записи
- Аутентификация пользователей по JSON Web Token (средствами Djoser)
- Удобная панель администрирования, на русском (требует создание пользователя с правами администратора, средствами движка Django)
- Возможно наделение правами администрирования одного из пользователей (стандартными средствами админ.панели)

## Описание работы.
На сайте не предусмотрено нормального веб-интерфейса, всё работает через REST API. Есть перечень эндпоинтов на главной странице и подробное описание на /redoc. Также, можно воспользоваться стандартным интерфейсом DRF, но только для анонимного чтения (посты и комментарии). 

## Требования (описано в requirements.txt):
- Django 3.2.16
- pytest 6.2.4
- pytest-pythonpath== .7.3
- pytest-django 4.4.0
- djangorestframework 3.12.4
- djangorestframework-simplejwt 4.7.2
- Pillow 9.3.0
- PyJWT 2.1.0
- requests 2.26.0
- djoser
- и их зависимости

Указаны минимально требуемые версии, однако, сервис работает и с актуальными (возникают проблемы с автотестами). 

## Установка на тестовом стенде:
- клонировать репозиторий на машину, с которой будет будет запускаться сервис (либо по SSH-ссылке, либо скопировать и распаковать zip-архив)

```
git clone https://github.com/andmerk93/api_final_yatube.git
```

- На машине должен быть установлен Python актуальной версии (тестировалось на 3.8)

```
cd api_final_yatube
```

- развернуть виртуальное окружение python в папке с проектом (api_final_yatube)

```
py -m venv venv
```

- активировать виртуальное окружение
для linux/unix

 ```
source ./venv/bin/activate 
``` 

(для Windows, должно быть разрешено выполнение скриптов Powershell)

```
venv\Scripts\activate
``` 

Обновить pip (если необходимо) и установить зависимости из файла requirements.txt:

```
py -m pip install --upgrade pip setuptools
pip install -r requirements.txt
```

- перейти в папку api_final_yatube/yatube_api  Дальнейшие команды будут выполняться отсюда
- создать необходимые таблицы в базе данных (нет необходимости делать makemigrations, описания миграций добавлены в репозиторий):

```
py manage.py migrate
```

Запустить проект:

```
py manage.py runserver
```

Тестовый сервер должен запуститься, и быть доступен по http://127.0.0.1:8000/
Остановка сервера выполняется по Ctrl+C

- Для теста панели администратора нужно создать пользователя с правами администратора и следовать инструкциям в консоли.

```
py manage.py createsuperuser
```

Панель администратора будет доступна по http://127.0.0.1:8000/admin/